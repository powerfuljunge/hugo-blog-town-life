<header class="site-header">
  <div class="container">
    <div class="site-title">
      <a href="{{ "/" | relLangURL }}">
        {{ .Site.Title }}
      </a>
    </div>

    <button id="nav-toggle" class="mobile-toggle" aria-label="メニュー切り替え">
      ☰
    </button>

    <nav id="main-nav" class="nav-menu">
      <a href="{{ "/" | relLangURL }}" class="nav-link">Home</a>

      {{/* ▼ 表示順を保証したカテゴリメニュー ▼ */}}
      {{ $menu := slice
        (dict "label" "注文住宅" "items" (slice
          (dict "url" "https://townlife-aff.com/link.php?i=645b4ba18234f&m=675598c315568" "text" "【無料】家づくり計画書の一括見積")
          (dict "url" "https://townlife-aff.com/link.php?i=5f2370a957a9b&m=675598c315568" "text" "【無料】間取りプラン作成")
          (dict "url" "https://townlife-aff.com/link.php?i=5a6fd184815fb&m=675598c315568" "text" "【無料】平屋住宅づくり")
          (dict "url" "https://townlife-aff.com/link.php?i=5ff3f84eb12b4&m=675598c315568" "text" "【無料】土地探し")
        ))
        (dict "label" "リフォーム" "items" (slice
          (dict "url" "https://townlife-aff.com/link.php?i=6552fc75c5f29&m=675598c315568" "text" "【無料】リフォーム見積比較 300万円が200万円も!")
          (dict "url" "https://townlife-aff.com/link.php?i=5af29474c8a10&m=675598c315568" "text" "【無料】リフォーム エクステリア・外構")
          (dict "url" "https://townlife-aff.com/link.php?i=646ada4dbba74&m=675598c315568" "text" "【無料】リフォーム シロアリ")
        ))
        (dict "label" "土地活用" "items" (slice
          (dict "url" "https://townlife-aff.com/link.php?i=5a7127c9e2515&m=675598c315568" "text" "【無料】最適な土地活用の提案")
        ))
        (dict "label" "空き家解決" "items" (slice
          (dict "url" "https://townlife-aff.com/link.php?i=67aeb70c15445&m=675598c315568" "text" "【無料】空き家解決診断")
        ))
        (dict "label" "物件情報" "items" (slice
          (dict "url" "https://townlife-aff.com/link.php?i=5a054bef01420&m=675598c315568" "text" "【無料】ネット未公開の物件情報")
        ))
      }}

      {{ range $menu }}
        <div class="dropdown-wrapper">
          <a href="#" class="dropdown-toggle nav-link">
            {{ .label }} <span class="caret">⌄</span>
          </a>
          <div class="dropdown">
            {{ range .items }}
              <a href="{{ .url }}" class="dropdown-item" target="_blank" rel="noopener">{{ .text }}</a>
            {{ end }}
          </div>
        </div>
      {{ end }}
    </nav>
  </div>
</header>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const navToggle = document.getElementById("nav-toggle");
    const mainNav = document.getElementById("main-nav");
    const dropdowns = document.querySelectorAll(".dropdown-wrapper");

    navToggle.addEventListener("click", () => {
      mainNav.classList.toggle("active");
    });

    // PC用のホバー動作（768px以上のみ）
    dropdowns.forEach(dropdown => {
      const toggle = dropdown.querySelector(".dropdown-toggle");
      const menu = dropdown.querySelector(".dropdown");

      toggle.addEventListener("mouseenter", () => {
        if (window.innerWidth > 768) {
          menu.style.display = "block";
        }
      });

      dropdown.addEventListener("mouseleave", () => {
        if (window.innerWidth > 768) {
          menu.style.display = "none";
        }
      });
    });
  });
</script>
